{% extends 'base.html' %}
{% block content %}
<div style="width:100%;">
    <div style="width: 110%; margin: 20px auto;">
        <main class="container">
            <div class="row g-4">
                <div class="col-md-5 col-lg-3 order-md-last">
                    <p>
                    <p><h5>Курсы валют:</h5></p>
                    {% if rates %}
                    {% for key, value in rates.rates.items %}
                    <ul class="list-group mb-2 shadow-sm">
                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div>
                                <h6 class="my-0">{{key}}</h6>
                                <small class="text-muted pt-3">{{ rates.creation_date_rates|date:"d M Y" }}</small>
                            </div>
                            <span class="pt-2">{{ value.Cur_OfficialRate }} руб.</span>
                        </li>
                    </ul>
                    {% endfor %}
                    {% endif %}
                    </p>
                    <h5><a href="{% url 'all_authors_article' %}" class="link">Все статьи</a></h5>
                    {% for article in articles %}
                    <div class="col-md-12">
                        <div class="row g-0 border rounded overflow-hidden flex-md-row mb-3 shadow-sm h-md-250 position-relative">
                            <div class="col p-4 d-flex flex-column position-static">
                                <strong class="d-inline-block mb-1 text-success">{{ article.author }}</strong>
                                <h5 class="mb-1">{{ article.title|truncatewords:8 }}</h5>
                                <div class="mb-2 text-muted">{{ article.creation_date }}</div>
                                <p class="mb-2">{{ article.text_article|truncatewords:10 }}</p>
                                <a href="{{article.get_url_article}}" class="stretched-link mb-2">Читать полностью</a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div class="col-md-7 col-lg-8">
                    {% for news in page_obj %}
                    <p>
                    <div class="col-md-12">
                        <div class="row g-0 border rounded overflow-hidden flex-md-row mb-10 shadow-sm h-md-250 position-relative">
                            <div class="col p-4 d-flex flex-column position-static">
                                <img src="{{ news.image }}" width="804">
                                <p></P><strong class="d-inline-block mb-2 text-primary">Источник: habr.com</strong></p>
                                <h3 class="mb-1">
                                    {{ news.title }}
                                </h3>
                                <p>
                                <div class="mb-1 text-muted">{{ news.creation_date_news|date }}</div>
                                <p>
                                <p>{{ news.text|truncatewords:35 }}</p>
                                <div class="d-flex justify-content-between">
                                    <a href="{{ news.get_url }}" class="stretched-link">Продолжить чтение</a>
                                    <div class="fs-4 mb-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                                             fill="currentColor" class="bi bi-chat-square-text-fill"
                                             viewBox="0 0 16 16">
                                            <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.5a1 1 0 0 0-.8.4l-1.9 2.533a1 1 0 0 1-1.6 0L5.3 12.4a1 1 0 0 0-.8-.4H2a2 2 0 0 1-2-2V2zm3.5 1a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z"></path>
                                        </svg>
                                        {{ news.get_comments_news.count }}
                                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                                             fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd"
                                                  d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"></path>
                                        </svg>
                                        {{ news.get_likes_news.count }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </p>
                    {% endfor %}
                    <ul class="pagination">
                        {% if page_obj.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{page_obj.previous_page_number}}" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        {% endif %}
                        {% for num in page_obj.paginator.page_range %}
                        {% if page_obj.number == num %}
                        <li class="page-item active"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
                        {% else %}
                        {{ page_obj.paginator.num_page }}
                        <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
                        {% endif %}
                        {% endfor %}
                        {% if page_obj.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </main>
    </div>
</div>
{% endblock %}
